[23:08:33] ğŸš€ Starting Experiment 6: Persistence Failure (Database Unavailability)
[23:08:33] â³ Waiting for agent startup...
[23:09:08] âŒ Failed to start agent. Output: ğŸ” DEBUG: apply_schema_patch() called
ğŸ” DEBUG: Imported livekit.agents.llm.utils
ğŸ” DEBUG: Stored original functions: <function build_legacy_openai_schema at 0x7cae251ac5e0>, <function build_strict_openai_schema at 0x7cae251ac680>
âœ… DEBUG: Patched functions assigned to utils module
2026-02-12 23:08:34,804 - utils.schema_fixer - INFO - âœ… Applied LLMStream patch to force strict_tool_schema=False
âœ… Applied LiveKit schema patch for strict JSON Schema compliance
2026-02-12 23:08:34,804 - utils.schema_fixer - INFO - âœ… Applied LiveKit schema patch for strict JSON Schema compliance
2026-02-12 23:08:34,806 - livekit - INFO - livekit_ffi::server:139:livekit_ffi::server - initializing ffi server v0.12.44
2026-02-12 23:08:34,806 - livekit - INFO - livekit_ffi::cabi:50:livekit_ffi::cabi - initializing ffi server v0.12.44
2026-02-12 23:08:35,796 - core.system_control.supabase_manager - WARNING - âš ï¸ Supabase credentials (SUPABASE_URL, SUPABASE_SERVICE_KEY) not found. Persistence disabled.
2026-02-12 23:08:45,858 - chaos.fault_injection - WARNING - ğŸ”¥ CHAOS ENABLED: {'enabled': True, 'persistence_failure_rate': 1.0, 'experiment_id': 'exp_persistence_fail', 'experiment_type': 'infrastructure'}
2026-02-12 23:08:45,859 - chaos.fault_injection - WARNING - ğŸ”¥ CHAOS: Loaded config from environment: {'enabled': True, 'persistence_failure_rate': 1.0, 'experiment_id': 'exp_persistence_fail', 'experiment_type': 'infrastructure'}
2026-02-12 23:08:46,005 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2026-02-12 23:08:46,005 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2026-02-12 23:08:50,812 - core.intelligence.rag_engine - INFO - ğŸ§  RAG Engine initialized with model: all-MiniLM-L6-v2
2026-02-12 23:08:50,897 - core.system_control.supabase_manager - INFO - âœ… Supabase Client Initialized
/media/harsha/New Volume/livekit/v2/Maya-One-phase-0-2/Agent/agent.py:236: DeprecationWarning: There is no current event loop
  loop = asyncio.get_event_loop()
[0m2026-02-12 23:08:50,911 - __main__ - INFO - ğŸ¥ Executing pre-flight health checks...
2026-02-12 23:08:50,911 - providers.llmprovider - INFO - ğŸ¤– Initializing LLM provider: groq
2026-02-12 23:08:50,912 - providers.llmprovider - INFO - âœ… Using Groq model: llama-3.1-8b-instant
2026-02-12 23:08:50,938 - providers.factory - INFO - âœ… LLM initialized: groq
2026-02-12 23:08:55,797 - mem0.vector_stores.qdrant - INFO - Inserting 1 vectors into collection mem0migrations
2026-02-12 23:08:55,891 - core.memory.local_engine - INFO - âœ… Local Memory Engine initialized at ./data/memory_qdrant
2026-02-12 23:08:55,891 - core.memory.summarizer - INFO - âœ… Summarizer initialized with Groq (Llama 3.1)
2026-02-12 23:08:55,934 - core.system_control.supabase_manager - INFO - âœ… Supabase Client Initialized

[36m============================================================[0m
[0m[36mğŸ¥ RUNNING STARTUP HEALTH CHECKS[0m
[0m[36m============================================================[0m
[0m
[0m[34mğŸ” Checking: LLM Connectivity...[0m[0m [0m2026-02-12 23:08:55,936 - utils.schema_fixer - WARNING - ğŸ”§ PATCH: Forcing strict_tool_schema=False for LLMStream (was True)
2026-02-12 23:08:55,936 - core.memory.cloud_sync - INFO - ğŸ”„ Cloud Sync started (interval: 60s)
2026-02-12 23:09:06,127 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
[32mâœ… PASS[0m (LLM streaming operational)[0m
[0m2026-02-12 23:09:06,145 - health.startup_checks - INFO - Health check 'LLM Connectivity' passed: LLM streaming operational
[34mğŸ” Checking: Tool Schema Validation...[0m[0m [0m[32mâœ… PASS[0m (No tools registered (OK))[0m
[0m2026-02-12 23:09:06,145 - health.startup_checks - INFO - Health check 'Tool Schema Validation' passed: No tools registered (OK)
[34mğŸ” Checking: ChatContext Contract...[0m[0m [0m[32mâœ… PASS[0m (ChatContext contract validated)[0m
[0m2026-02-12 23:09:06,146 - health.startup_checks - INFO - Health check 'ChatContext Contract' passed: ChatContext contract validated
[34mğŸ” Checking: Memory Layer...[0m[0m [0m[32mâœ… PASS[0m (Memory layer operational (with summarizer))[0m
[0m2026-02-12 23:09:06,146 - health.startup_checks - INFO - Health check 'Memory Layer' passed: Memory layer operational (with summarizer)
[34mğŸ” Checking: STT Pipeline...[0m[0m [0m[31mâŒ FAIL[0m[0m
[0m[31m   â””â”€ STT pipeline check failed: ProviderFactory.get_stt() missing 2 required positional arguments: 'language' and 'model'[0m[0m
[0m2026-02-12 23:09:06,146 - health.startup_checks - ERROR - Health check 'STT Pipeline' failed: STT pipeline check failed: ProviderFactory.get_stt() missing 2 required positional arguments: 'language' and 'model'
[34mğŸ” Checking: TTS Pipeline...[0m[0m [0m[31mâŒ FAIL[0m[0m
[0m[31m   â””â”€ TTS pipeline check failed: ProviderFactory.get_tts() missing 2 required positional arguments: 'voice' and 'model'[0m[0m
[0m2026-02-12 23:09:06,147 - health.startup_checks - ERROR - Health check 'TTS Pipeline' failed: TTS pipeline check failed: ProviderFactory.get_tts() missing 2 required positional arguments: 'voice' and 'model'

[36m============================================================[0m[0m
[0m[31mâŒ HEALTH CHECKS FAILED (4/6 passed)[0m[0m
[0m
[31mFailed checks:[0m[0m
[0m[31m  â€¢ STT Pipeline: STT pipeline check failed: ProviderFactory.get_stt() missing 2 required positional arguments: 'language' and 'model'[0m[0m
[0m[31m  â€¢ TTS Pipeline: TTS pipeline check failed: ProviderFactory.get_tts() missing 2 required positional arguments: 'voice' and 'model'[0m[0m
[0m
[36m============================================================[0m
[0m
[0m[31mğŸš« AGENT STARTUP ABORTED - FIX ISSUES ABOVE[0m
[0m
[0m2026-02-12 23:09:06,147 - __main__ - ERROR - âŒ Pre-flight health checks failed. Aborting.
[0m
[23:09:08] Cleaning up...
[23:09:29] ğŸš€ Starting Experiment 6: Persistence Failure (Database Unavailability)
[23:09:29] â³ Waiting for agent startup...
[23:10:02] ğŸ—£ï¸ Phase 1: Interaction during Persistence Failure
[23:10:04] Agent Response: time": 0.0}[0m
[0m    [2;36m23:10:02.047[0m[2;36m [0m[36mDEBUGâ€¦[0m asyncio            Using selector: EpollSelector [2m [0m
[0m2026-02-12 23:10:02,082 - __main__ - INFO - ğŸ”Œ Initializing session...
    [2;36m23:10:02.082[0m[2;36m [0m[32mINFO â€¦[0m __main__           ğŸ”Œ Initializing 
[23:10:04] ğŸ Experiment Complete
[23:10:04] Cleaning up...
